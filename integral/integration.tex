\documentclass[../main.tex]{subfiles}

\begin{document}
    \section{Integration of Differential Forms}
    \subsection{Partition of Unity}
    \begin{definition}[Support]\label{def:support}
        Let \(X\) be a topological space, and \(f : X \to \mathbb{R}\). Then 
        the support of \(f\) is defined as
        \[
        \supp f := \Set{x \in X|f(x) \neq 0}.
        \]
    \end{definition}
    \begin{theorem}[Partition of Unity]\label{thm:manifold-partition-of-unity}
        Let \(\manifold[M]\) be a \(C^\infty\) manifold with dimension \(m\) with 
        atlas \(\Phi\). \\
        Let \(\Phi = \Set{\phi_j|\phi_j : V_j \to \phi_j(V_j), j \in J}\).\\
        Then it is possible to construct a set of \(C^\infty\) functions 
        \(\rho_j, j \in J\) s.t. 
        \[
        1 = \sum_{j \in J}^{} \rho_j,\; \supp \rho_j \subseteq V_j
        \]
    \end{theorem}
    \subsection{Orientation}
    \subsubsection{Definition}
    \begin{definition}[Compatible Coordinate Charts]\label{def:compatible-coord-charts}
        Given a manifold \(\manifold[M]\), its two coordinate charts are called 
        compatible (have the same orientation) if, 
        \[
        \det J > 0.
        \]
        Where \(J\) is the Jacobian matrix \cref{def:jacobian-matrix}.\\
        If the manifold has a maximal compatible atlas, then we say the manifold is 
        orientable, and we may call its corresponding 
        orientation positive and denote the atlas \(\Phi_+\).
    \end{definition}
    \begin{theorem}
        A manifold has either no orientation (any atlas is not compatible) or 
        two orientations.
    \end{theorem}
    \begin{theorem}[Orientability and Existence of Forms of Highest Degree]\label{thm:volume-form-orientability}
        A manifold is orientable iff there exists a nowhere vanishing differential 
        form of the highest degree.
    \end{theorem}
    \subsubsection{Positively Oriented Boundary}
    \begin{definition}[Positively Oriented Boundary]\label{def:positive-boundary}
        Let \(\manifold[M]\) be a orientable \(C^\infty\) manifold with dimension 
        \(m\), positively oriented by compatible atlas \(\Phi_+\). Define coordinate 
        charts on \(\partial \manifold[M]\) from \(\Phi\) as follows, 
        \[
        \phi^{\partial \manifold[M]} : U_\phi \cap \partial \manifold[M] 
        \to \mathbb{R}^{m-1}, 
        \]
        Then \(\Phi^{\partial \manifold[M]}_+ := 
        \Set{\phi^{\partial \manifold[M]}| \phi \in \Phi_+}\) determines an 
        orientation on \(\partial \manifold[M]\), called the positive orientation.
    \end{definition}

    \subsection{Pseudoforms (Densities)}
    \subsubsection{Pseudoscalars}
    \begin{definition}[Space of Pseudoscalars]\label{def:pseudoscalar-space}
        Given a manifold \(\manifold[M]\) and a point \(p\) on it.
        Choose an arbitrary orientation \(o_p=\Phi_+\) of \(T_p\manifold[M]\). On the 
        set \(\mathbb{R}\times \{o_p, -o_p\}\), define an equivalence relation,
        \[
        {\equiv} : (c, o_p) \equiv (-c, -o_p).
        \]
        We denote \(\pseudoscalar[p] := \mathbb{R}\times \{o_p, -o_p\} / {\equiv}\), 
        and call it the space of pseudoscalars. Under a choice of local orientation 
        \(o\), we often denote its element \((c, o) \equiv (-c, -o)\) by 
        \(\pseudo{c}\).
    \end{definition}
    \begin{theorem}[Pseudoscalar Vector Space]\label{thm:pseudoscalar-vector-space}
        The space \(\pseudoscalar[p]\) forms a vector space under the operations,
        \[
        \begin{aligned}
            &(a, o) + (b, o) = (a+b, o), \\
            &c(a, o) = (ca, o).
        \end{aligned}
        \]
        Specifically, \(\dim \pseudoscalar[p]=1\), since \(\forall \pseudo{c} \in 
        \pseudoscalar[p]\), \(\exists~c \in \mathbb{R}\) s.t. 
        \(\pseudo{c} = c\pseudo{1}\).
    \end{theorem}
    \begin{theorem}[Pseudoscalar Vector Bundle]\label{thm:pseudoscalar-vector-bundle}
        On the space \(\pseudoscalar = \bigcup_{p \in \manifold[M]}^{}
        \pseudoscalar[p]\), define the canonical projection \(\pi : \pseudoscalar \to 
        \manifold[M]\) by \(\pseudoscalar[p] \mapsto p\).\\
        For any chart \(\phi : U \to \mathbb{R}^m \in \Phi\) of the underlying 
        manifold \(\manifold[M]\), it induces an orientation on \(T_p\manifold[M]\), 
        denoted by \(o_\phi\). We define the local trivialization by 
        \[
        \begin{aligned}
            \tilde{\phi} : \tilde{\pi}(U) &\to U \times \mathbb{R} \\
            (p, (c, o_\phi)) &\mapsto (p, c).
        \end{aligned}
        \]
        And this makes pseudoscalars a vector bundle on any manifold \(\manifold[M]\).
    \end{theorem}
    \begin{theorem}[Pseudoscalars Under Coordinate Transformation]\label{thm:pseudoscalar-coordinate-transformation}
        Given two charts \(\phi : U \to \mathbb{R}^m, \psi : V \to \mathbb{R}^m \in 
        \Phi\) of a manifold \(\manifold[M]\), define local trivialization of the 
        pseudoscalar bundle \(\tilde{\phi}, \tilde{\psi}\) according to 
        \cref{thm:pseudoscalar-vector-bundle}. If we throw away the point part and 
        retain only the scalar part, we have 
        \[
        \tilde{\phi}((p, (c, o_\phi))) = (\sgn \det J)\tilde{\psi}((p, (c, o_\phi)))
        \]
    \end{theorem}
    \begin{proof}
        If \(o_\phi = o_\psi\), that is, \(\det J > 0\) and their orientations agree, 
        then \((c, o_\phi)\equiv(c, o_\psi) \mapsto c\). \par
        But if \(o_\phi = -o_\psi\), that is, \(\det J < 0\) and their orientations 
        disagree, then \((c, o_\phi)\equiv(-c, o_\psi)\). The former is mapped to 
        \(c\), the latter is mapped to \(-c\). \par
        This shows that pseudoscalars "flip sign" under charts of different orientation.
    \end{proof}
    \subsubsection{Definition}
    \begin{definition}[Pseudoforms]\label{def:pseudoforms}
        The space of pseudoforms \(\pseudoform{k}{M}\) is defined by the space of 
        differential forms tensored with (twisted by) the pseudoscalar bundle,
        \[
        \pseudoform{k}{M} = \bigwedge^kT^*\manifold[M] \otimes 
        \pseudoscalar(\manifold[M]).
        \]
        This means, pseudoforms are defined locally as 
        \[
        \pseudo{\omega} = \pseudo{1}\omega\indices{_{i_1}_{\dots}_{i_k}}dx^{i_1}\wedge 
        \dots\wedge dx^{i_k}.
        \]
    \end{definition}
    \subsubsection{Pseudoforms and Forms on Orientable Manifolds}
    \begin{definition}[Pseudoforms to Forms]\label{def:pseudo-to-form}
        For a pseudoform \(\pseudo{\omega} \in \pseudoform{k}{M}\) 
        on an orientable manifold \(\manifold[M]\) of degree \(m\) positively oriented 
        by the atlas \(\Phi_+\), the positive orientation is chosen in a continuous 
        manner. Then \(\pseudoscalar(\manifold[M])\) is isomorphic to \(\mathbb{R}\) 
        by the positive orientation in a continuous manner, so we can say
        \[
        \begin{aligned}
            o_+ : \pseudoform{k}{M} &\to \form{k}{M} \\
            \pseudo{1}\omega\indices{_{i_1}_{\dots}_{i_k}}dx^{i_1}\wedge 
            \dots\wedge dx^{i_k} &\mapsto \omega\indices{_{i_1}_{\dots}_{i_k}}
            dx^{i_1}\wedge\dots\wedge dx^{i_k}
        \end{aligned}
        \]
        defines a smooth differential form on \(\manifold[M]\).
    \end{definition}
    \subsubsection{On Absolute Values}
    \begin{remark}
        Some people would say for \(m=\dim \manifold[M]\), pseudo-\(m\)-forms are 
        absolute values of \(m\)-forms. Personally I disliked this definition, but 
        it is doable.
    \end{remark}
    \begin{theorem}
        Given vectors \(v_1, \dots, v_m \in T_p\manifold[M]\), denote their 
        orientation by \(o_v\). Choose the orientation of pseudoscalars according to 
        the chart \(\phi\), and let \(\tilde{o}_v(\pseudo{1}) : \pseudoscalar[p] 
        \to \mathbb{R}\) by \((c, o_v) \mapsto c\).
        \[
        \begin{aligned}
            &\left(\tilde{o}_v(\pseudo{1})f(x)dx^1\wedge\dots\wedge dx^m\right)
            (v_1, \dots, v_m) \\
            =&\lvert\left( f(x)dx^1\wedge\dots\wedge dx^m \right)
            (v_1, \dots, v_m)\rvert .
        \end{aligned}
        \]
    \end{theorem}
    \subsection{Integration of Forms of Highest Degree}
    \begin{definition}[Integration]\label{def:top-form-integration}
        Let \(\manifold[M]\) be a paracompact \(C^\infty\) manifold of dimension 
        \(m\). 
        Choose a \(C^\infty\) partition of unity \(\rho_j, j \in J\) of 
        \(\manifold[M]\) s.t. \(\supp \rho_j \subseteq U_{\phi_j} := U_j\). \\
        Let a pseudo-\(m\)-form \(\pseudo{\omega} \in 
        \pseudoform{m}{M}\) has local expression 
        \(\tilde{\omega}_{\phi_j} = \pseudo{1}f_j(x)dx^1_j\wedge \dots\wedge dx^m_j\), 
        we say 
        \[
        \int_{\manifold[M]} \tilde{\omega} = 
        \sum_{j \in J}^{} \int_{(-\infty, 0] \times \mathbb{R}^{m-1}}
        \tilde{\phi}_j(\pseudo{1})(\rho_j \circ \phi_j ^{-1})(x) f_j(x) dx^1\dots dx^m
        \]
        if the finite sum exists and has the same value for all choices of 
        \(\rho_j\) and \(\phi_j\).
    \end{definition}
    \begin{remark}
        The following theorem reveals why we integrate pseudoforms, not usual forms.
    \end{remark}
    \begin{theorem}[Criterion of Existence of Integral]\label{thm:cpt-form-integral-exist}
        If \(\supp \tilde{\omega}\) is compact, then 
        \(\int_{\manifold[M]} \tilde{\omega}\) exists.
    \end{theorem}
    \begin{proof}
        Let two sets of coordinate charts be 
        \[
        \begin{aligned}
            \phi_j &: U_j \to V_j, j \in J \\
            \phi_k'&: U'_k \to V'_k, k \in K.
        \end{aligned}
        \]
        And cooresponding partition of unity be \(\rho_j, \rho'_k\).\par
        (The goal) Show
        \[
        \begin{aligned}
            &\sum_{j \in J}^{} \int
            \tilde{\phi}_j(\pseudo{1})(\rho_j \circ \phi_j ^{-1})(x) f_j(x) dx^1\dots dx^m \\
            =&\sum_{k \in K}^{} \int
            \tilde{\phi}'_k(\pseudo{1})(\rho'_k \circ {\phi'_k} ^{-1})(x') f'_k(x') {dx'}^1\dots {dx'}^m
        \end{aligned}
        \]
        \par
        (Split using \(\rho_k'\))
        \[
        \begin{aligned}
            \int_{\manifold[M]} \omega &= 
            \sum_{j \in J}^{} \int
            \tilde{\phi}_j(\pseudo{1})(\rho_j \circ \phi_j ^{-1})(x) f_j(x) dx^1\dots dx^m \\
            &= \sum_{j \in J}^{} \int \sum_{k \in K}^{}
            \tilde{\phi}_j(\pseudo{1})(\rho'_k\circ \phi_j ^{-1})(x)(\rho_j\circ \phi_j ^{-1})(x) f_j(x)
            dx^1\dots dx^m.
        \end{aligned}
        \]
        Since the sum is finite, and \(\supp\omega\) is compact, and therefore 
        the integral is not improper; thus, there can be no limit or Fubini 
        problems on exchanging sums and integrals. So 
        \[
        \begin{aligned}
            \int_{\manifold[M]} \omega
            &= \sum_{j \in J}^{}\sum_{k \in K}^{} \int 
            \tilde{\phi}_j(\pseudo{1})(\rho_j\rho'_k\circ \phi_j ^{-1})(x)f_j(x)
            dx^1\dots dx^m \\
        \end{aligned}
        \]
        \par
        (Change of variables)
        First fix \(j, k\).
        \[
        \begin{aligned}
            &\int \tilde{\phi}_j(\pseudo{1})(\rho_j\rho'_k\circ \phi_j ^{-1})(x)f_j(x) dx^1\dots dx^m \\
            =&\int \tilde{\phi}_j(\pseudo{1})(\rho_j\rho'_k\circ \phi_j ^{-1})(\phi_j\circ{\phi_k'}^{-1}(x'))
            f_j(\phi_j\circ{\phi_k'}^{-1}(x')) 
            \left|\det \left(\frac{\partial x}{\partial x'}\right)\right|
            {dx'}^1\dots {dx'}^m \\
            =&\int \tilde{\phi}_j(\pseudo{1})(\rho_j\rho'_k\circ{\phi_k'}^{-1}(x'))
            f_j(\phi_j\circ{\phi_k'}^{-1}(x')) 
            \left|\det \left(\frac{\partial x}{\partial x'}\right)\right|
            {dx'}^1\dots {dx'}^m
        \end{aligned}
        \]\par
        (Pseudoscalar) From \cref{thm:pseudoscalar-coordinate-transformation},
        \[
        \tilde{\phi}_j(\pseudo{1}) = (\sgn\det J)\tilde{\phi}'_k(\pseudo{1})
        \]
        we see
        \[
        \begin{aligned}
            &\tilde{\phi}'_k(\pseudo{1})f'_j(x')dx^1\wedge \dots \wedge dx^m \\
            =&(\sgn\det J)\tilde{\phi}_j(\pseudo{1})f_j(\phi_j\circ {\phi'_k}^{-1}(x'))
            \left(\frac{\partial x^1}{\partial {x'}^{\ell_1}}{dx'}^{\ell_1}\right)
            \wedge \dots\wedge 
            \left(\frac{\partial x^m}{\partial {x'}^{\ell_m}}{dx'}^{\ell_m}\right) \\
            =&(\sgn\det J)\sum_{\sigma \in S_m}^{} \tilde{\phi}_j(\pseudo{1})f_j(\phi_j\circ {\phi'_k}^{-1}(x'))
            (\sgn \sigma)\frac{\partial x^1}{\partial {x'}^{\sigma(1)}}\dots
            \frac{\partial x^m}{\partial {x'}^{\sigma(m)}}
            {dx'}^1\wedge\dots\wedge{dx'}^m \\
            =&(\sgn\det J)\tilde{\phi}_j(\pseudo{1})f_j(\phi_j\circ {\phi'_k}^{-1}(x'))
            \det \left(\frac{\partial x}{\partial x'}\right)
            {dx'}^1\wedge\dots\wedge{dx'}^m \\
            =&\tilde{\phi}_j(\pseudo{1})f_j(\phi_j\circ {\phi'_k}^{-1}(x'))
            \left|\det \left(\frac{\partial x}{\partial x'}\right)\right|
            {dx'}^1\wedge\dots\wedge{dx'}^m
        \end{aligned}
        \]
        Therefore, the integral 
        \[
        \begin{aligned}
            &\int (\rho_j\rho'_k\circ{\phi_k'}^{-1}(x'))
            \tilde{\phi}_j(\pseudo{1})f_j(\phi_j\circ{\phi_k'}^{-1}(x')) 
            \left|\det \left(\frac{\partial x}{\partial x'}\right)\right|
            {dx'}^1\dots {dx'}^m \\
            =&\int (\rho_j\rho'_k\circ{\phi_k'}^{-1}(x'))
            \tilde{\phi}'_k(\pseudo{1})f'_k(x')
            {dx'}^1\dots {dx'}^m
        \end{aligned}
        \]\par
        (Closing) By moving the sum wrt \(j \in J\) into the integral and using 
        the property of partition of unity, the proof is completed.
    \end{proof}
    \subsection{Integration of Forms of Lower Degree}
    \subsubsection{Definition}
    \begin{definition}[Integration of Lower Degree Forms]\label{def:pullback-integral}
        Let \(\manifold[Z]\) be an oriented \(C^\infty\) manifold of dimension \(d\), 
        \(f : \manifold[Z] \to \manifold[M]\) be a \(C^\infty\) map to a \(C^\infty\) 
        manifold \(\manifold[M]\) of dimension \(m\). \\
        Let \(\omega \in \form{d}{M}\), we define 
        \[
        \int_{\manifold[Z]}\omega := \int_{\manifold[Z]}^{} f^*\omega
        \]
        using the positive orientation of \(\manifold[Z]\), if it exists 
        and the pullback function \(f\) is clear from context.
    \end{definition}
    \begin{remark}
        Let's look at an example. Choose \(\manifold[M] = \mathbb{R}^2\), 
        \(\manifold[Z] = [-1, 1]\), \(\omega = dx^2\), and \(f : \manifold[Z] 
        \to \manifold[M]\) defined trivially by \(p \mapsto (0, p)\). \\
        If we choose the positive orientation by setting \(\idd \in \Phi_+\), then we 
        see 
        \[
        \begin{aligned}
            \eta &:= f^*\omega = dx^2 \\
            \pseudo{\eta} &= dx^2 \\
            \int_{\manifold[Z]} \pseudo{\eta} &= 1.
        \end{aligned}
        \]
        If we choose the positive orientation by setting \(-\idd \in \Phi_+\), then 
        \[
        \begin{aligned}
            \eta' &:= f^*\omega = dx^2 \\
            \pseudo{\eta}' &= -dx^2 \\
            \int_{\manifold[Z]} \pseudo{\eta}' &= -1.
        \end{aligned}
        \]
    \end{remark}
    \subsubsection{Stoke's theorem}
    \begin{theorem}[Stoke's Theorem]\label{thm:stokes-theorem}
        If \(\manifold[M]\) is an oriented \(C^\infty\) manifold of dimension \(m\) 
        and \(\omega \in \form{{m-1}}{M}\), then 
        \[
        \int_{\manifold[M]}^{}d\omega = \int_{\partial \manifold[M]}^{}\omega
        := \int_{\partial \manifold[M]}^{} i^*\omega,
        \]
        where \(i : \partial \manifold[M] \to \manifold[M]\) is just the immersion 
        map, \(i : p \mapsto p\).
    \end{theorem}
    \begin{proof}
        (Partition Using Charts) Choose a \(C^\infty\) partition of unity 
        \cref{thm:manifold-partition-of-unity} \(\rho_j, j \in J\) s.t. 
        \(\supp \rho_j\) are compact and \(\supp \rho_j \subseteq U_{\phi_j} 
        := U_j\). \par
        Now \(\omega = \sum_{j \in J}^{} \rho_j \omega\) is a finite sum. So 
        it suffices to show that, if \(\eta \in \form{m-1}{M}\), \(\supp \eta\) 
        compact and \(\supp\eta \subseteq U_\phi\) then \(\int_{\manifold[M]}^{}
        d\eta = \int_{\partial \manifold[M]}^{} \eta\), and apply 
        \(\eta = \rho_j\omega\) for all \(j \in J\). \par
        (The integral)
        Suppose the coordinates of \(\phi\) is labeled \(x^1, \dots, x^m\).
        % Since \(\supp \eta \subseteq U_\phi\), we will make no distinction between 
        % \(\eta \in \form{m-1}{M}\) and \(\eta_\phi \in \eucForm{m-1}{m}\). \par
        Locally, let 
        \[
        \eta = \sum_{\ell=1}^{m} f_\ell dx^1\wedge \cdots \cancel{dx^\ell} \cdots 
        \wedge dx^m,
        \]
        where \(f_\ell : (-\infty, 0] \times \mathbb{R}^{m-1} \to \mathbb{R}\), and 
        it is \(C^\infty\). Then, also locally, 
        \[
        \begin{aligned}
            d\eta &= \sum_{\ell = 1}^{m} \frac{\partial f_\ell}{\partial x^\ell} dx^\ell 
            \wedge dx^1\wedge \cdots \cancel{dx^\ell} \cdots \wedge dx^m \\
            &= \left(\sum_{\ell=1}^{m} (-1)^{\ell-1}
            \frac{\partial f_\ell}{\partial x^\ell}\right)dx^1\wedge \dots \wedge dx^m.
        \end{aligned}
        \]
        Then by \cref{def:top-form-integration}, 
        \[
        \int_{\manifold[M]}^{}d\eta = \int_{(-\infty, 0]\times \mathbb{R}^{m-1}}^{} 
        \left(\sum_{\ell=1}^{m} (-1)^{\ell-1}
        \frac{\partial f_\ell}{\partial x^\ell}\right)dx^1\dots dx^m.
        \]\par
        (To be precise, we need to choose another partition of unity \(\rho_j'\) to 
        do intergration. But we can just choose it to cover all of \(\supp \eta\) 
        and don't care all other parts, so that doesn't matter too much.)\par
        Choose a rectangular region \(R\) s.t. 
        \[
        \supp \eta \subseteq [a_1, 0]\times \dots \times [a_m, b_m]
        \]
        and define 
        \[
        R_\ell := [a_1, 0] \times \dots \cancel{[a_\ell, b_\ell]} \dots 
        \times [a_m, b_m].
        \]\par
        (\(\ell = 2,\dots, m\)) In this case, by Fubini and FTC, 
        \[
        \begin{aligned}
            &\int_{R}^{}\frac{\partial f_\ell}{\partial x^\ell}dx^1\dots dx^m\\
            =&\int_{R_\ell}^{}\left(\int_{a_\ell}^{b_\ell} 
            \frac{\partial f_\ell}{\partial x^\ell}dx^\ell\right)dx^1\dots
            \cancel{dx^\ell}\dots dx^m \\
            =&\int_{R_\ell}^{}
            (\underbrace{f_\ell(x^1, \dots, b_\ell, \dots, x^m)}_{0}
             - \underbrace{f_\ell(x^1, \dots, a_\ell, \dots, x^m)}_{0})
            dx^1\dots \cancel{dx^\ell}\dots dx^m \\
            =&0, 
        \end{aligned}
        \]
        since \(\supp\eta \subseteq R\), so on the boundary \(f=0\). \par
        (\(\ell = 1\)) Now the integral has only one term left.
        \[
        \begin{aligned}
            \int_{\manifold[M]}^{} d\eta &= 
            \int_{R}^{} \frac{\partial f_1}{\partial x^1}dx^1\dots dx^m \\
            &=\int_{R_1}^{} \left(\int_{a_1}^{0}\frac{\partial f_1}{\partial x^1}
            dx^1\right)dx^2\dots dx^m \\
            &=\int_{R_\ell}^{}
            (f_1(0, x^2, \dots, x^m) - \underbrace{f_1(a_1, x^2, \dots, x^m)}_{0})
            dx^2\dots dx^m \\
            &=\int_{\mathbb{R}^{m-1}}^{} (f_1\circ i) dx^2\dots dx^m \\
            &=\int_{\partial \manifold[M]}^{} i^*\eta.
        \end{aligned}
        \]
    \end{proof}
\end{document}